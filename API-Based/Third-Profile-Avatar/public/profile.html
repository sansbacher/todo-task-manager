<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="assets/w3-theme-nebulas-blue.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/sa-todo-style.css">
	<title>Edit your Todo Task Manager Profile</title>
</head>
<body>
<script>
	// Initial script before the page has even loaded:
	// Check if we're logged in with an auth_token Cookie from the server or our Cookie (doesn't check if token is valid/expired or not)
	if (decodeURIComponent(document.cookie).indexOf('auth_token=') < 0 && decodeURIComponent(document.cookie).indexOf('task_manager_auth_token=') < 0) {
		window.location.href = "login.html"
	}
</script>
	<div class="w3-content" id="page-container">
		<!-- required to centre everything -->

		<div class="w3-bar w3-theme" id="nav-bar">
			<a class="w3-button w3-bar-item w3-theme-d1 w3-left" href="./">Home</a>
			<a class="w3-button w3-bar-item w3-theme-d1 w3-right" href="about.html">About</a>
		</div>
		<div class="w3-container w3-large w3-center w3-theme-l3" id="header">
			<h2 class="w3-wide w3-xxlarge sa-font-serif">Todo Task Manager</h2>
			<p><i>Manage all you have <em>Todo</em>!</i></p>
		</div>
		<div class="w3-center" id="intro">
			<!-- <span class="fa fa-list-alt w3-jumbo w3-margin-top"></span> -->
			<img id="profile-pic" src="assets/checklist-logo.png" alt="Profile Pic or Checklist clipboard logo" class="w3-image w3-margin-top">
			<p>
				<strong>Modify your Profile for the Vanilla JavaScript API Based Todo Task Manager</strong>
			</p>
			<div id="messages">
				<p id="message-1"></p>
				<p id="message-2"></p>
				<p id="message-3"></p>
			</div>
		</div>
		<div class="w3-center" id="profile">
			<div class="w3-col w3-container w3-left sa-width-15"></div> <!-- left/right responsive padding -->
			<div class="w3-col w3-container w3-right sa-width-15"></div>
			<div class="w3-left-align w3-rest">
				<p>Update your Todo Task Manager Profile by entering any new values below and clicking <b>Save</b> - you don't need to update them all. To remove your account click <b>Delete Profile</b>. To log yourself out of all sessions on all machines click <b>Logout All Sessions</b>.</p>
				<p>To add a Profile Picture click <b>Choose File / Browse</b> to browse for an image, then click <b>Upload Avatar</b>. To delete your profile picture click <b>Remove Avatar</b>.</p>
				<p><em>Bonus:</em> click <b>Add Tasks</b> (at the very bottom) to add a bunch of randomly named dummy tasks - for testing purposes.</p>
				<form class="w3-container w3-threequarter" id="profile-form">
					<label for="name-field"><b>Name:</b></label>
					<input type="text" name="name" id="name-field" class="w3-input w3-border w3-margin-bottom">
					<label for="email-field"><b>Email Address:</b></label>
					<input type="email" name="email" id="email-field" class="w3-input w3-border w3-margin-bottom">
					<label for="password"><b>Password:</b></label>
					<input type="password" name="password" class="w3-input w3-border w3-margin-bottom" placeholder="Type a new Password to change it">
					<label for="age-field"><b>Age:</b></label>
					<input type="number" name="age" id="age-field" class="w3-input w3-border" placeholder="Enter your Age (optional)">
					<button id="btn-del-profile" class="w3-button w3-theme-l1 w3-section w3-padding w3-left" type="button">Delete Profile</button>
					<button id="btn-logout-all" class="w3-button w3-theme-l1 w3-section w3-padding w3-margin-left w3-left" type="button">Logout All Sessions</button>
					<button class="w3-button w3-theme w3-section w3-padding w3-right" type="submit">Save</button>
				</form>

				<form class="w3-container w3-threequarter" id="avatar-form">
					<label for="avatar"><b>Profile Picture:</b> </label>
					<input type="file" id="avatar" name="avatar" accept="image/*">
					<button class="w3-button w3-theme-l1 w3-section w3-padding w3-left" type="submit">Upload Avatar</button>
					<button id="btn-del-avatar" class="w3-button w3-theme-l1 w3-section w3-padding w3-margin-left" type="button">Remove Avatar</button>
				</form>

				<!-- This is strictly to ease testing by creating a bunch of randomly named tasks. No real-world purpose. -->
				<form class="w3-container w3-threequarter w3-small w3-center" id="diag-form">
					<label for="btn-inject-tasks">Add a bunch of dummy tasks (for testing):</label>
					<button id="btn-inject-tasks" class="w3-button w3-theme-l1 w3-padding" type="submit">Add Tasks</button>
				</form>

			</div>
		</div>

		<!-- Some quick TEST functions, useful while developing/debugging - multer accepts multipart/form-data file uploads -->
		<!-- <br>
		<div id="testing" class="w3-content w3-card-4 w3-padding w3-twothird">
			<p><b>A TEST Function:</b></p>
			<form action="/users/me/avatar" method="post" enctype="multipart/form-data">
				<label for="avatar">Upload Avatar </label>
				<input type="file" name="avatar" />
				<button>Submit</button>
			</form>
		</div> -->

		<div class="w3-row w3-margin-bottom" id="bottom-padding">
			<div class="w3-col w3-container sa-height-25px"></div>
		</div>
		<div class="w3-content w3-container w3-center w3-theme" id="footer">
			<p class="w3-tiny">
				Source code on <a href="https://github.com/sansbacher/todo-task-manager" target="_blank">Github</a>
			</p>
			<p class="w3-tiny">
				Handmade HTML using CSS from <a href="https://www.w3schools.com/w3css/" target="_blank">W3 Schools</a>. W3.CSS is free to use, no license is necessary. Simple and works.
			</p>
		</div>
	</div>
<script type="text/javascript" src="assets/client-util.js"></script>
<script type="text/javascript" src="assets/client-profile.js"></script>
</body>
</html>